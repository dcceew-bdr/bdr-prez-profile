@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix altr-ext: <http://www.w3.org/ns/dx/connegp/altr-ext#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix prez: <https://prez.dev/> .
@prefix prof: <http://www.w3.org/ns/dx/prof/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix shext: <http://example.com/shacl-extension#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix schema: <https://schema.org/> .
@prefix tern: <https://w3id.org/tern/ontologies/tern/> .
@prefix void: <http://rdfs.org/ns/void#> .

<https://prez/profiles> {
    prez:BDRHumanFeatureProfile a
            prof:Profile,
            sh:NodeShape,
            prez:ListingProfile,
            prez:ObjectProfile ;
        dcterms:description "BDR Human Readable profile." ;
        dcterms:identifier "bdr-feature-human"^^xsd:token ;
        dcterms:title "BDR Feature Human Readable Profile" ;
        altr-ext:constrainsClass
            geo:Feature, rdfs:Resource , prez:CQLFilterResult , prez:SearchResult ;
        altr-ext:hasDefaultResourceFormat "application/geo+json" ;
        altr-ext:hasResourceFormat
            "application/geo+json",
            "application/anot+ld+json",
            "application/ld+json",
            "application/rdf+xml",
            "text/anot+turtle",
            "text/turtle" ;
        sh:property
            [
                sh:path
                    [
                        sh:union (
                                     shext:allPredicateValues
                                     [ shext:bNodeDepth "2" ]
                                     ( geo:hasGeometry geo:asWKT )
                                     ( geo:hasDefaultGeometry geo:asWKT )
                                     ( schema:temporal shext:allPredicateValues )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:usedProcedure )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:phenomenonTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:usedProcedure tern:methodType )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:phenomenonTime )
                                     ( [ sh:inversePath rdfs:member ] rdf:type )
                                     ( [ sh:inversePath rdfs:member ] schema:isPartOf )
                                     ( [sh:inversePath schema:about] rdfs:comment )
                                     ( [sh:inversePath schema:about] schema:identifier )
                                     ( [sh:inversePath schema:about] schema:isPartOf )
                                 )
                    ]
            ] ;
    .

    prez:BDRHumanFeatureWithAttributesProfile a
            prof:Profile,
            sh:NodeShape,
            prez:ListingProfile,
            prez:ObjectProfile ;
        dcterms:description "BDR Human Readable profile with additional TERN attributes." ;
        dcterms:identifier "bdr-feature-attributes-human"^^xsd:token ;
        dcterms:title "BDR Feature and Attributes Human Readable Profile" ;
        altr-ext:constrainsClass
            geo:Feature, rdfs:Resource , prez:CQLFilterResult , prez:SearchResult ;
        altr-ext:hasDefaultResourceFormat "application/geo+json" ;
        altr-ext:hasNodeShape
            [
                a sh:NodeShape ;
                sh:targetClass geo:Feature ;
                altr-ext:hasDefaultProfile prez:BDRHumanFeatureWithAttributesProfile
            ] ;
        altr-ext:hasResourceFormat
            "application/geo+json",
            "application/anot+ld+json",
            "application/ld+json",
            "application/rdf+xml",
            "text/anot+turtle",
            "text/turtle" ;
        sh:property
            [
                sh:path
                    [
                        sh:union (
                                     shext:allPredicateValues
                                     [ shext:bNodeDepth "2" ]
                                     ( geo:hasGeometry geo:asWKT )
                                     ( geo:hasDefaultGeometry geo:asWKT )
                                     ( schema:temporal shext:allPredicateValues )
                                     ( tern:hasAttribute tern:attribute )
                                     ( tern:hasAttribute tern:hasSimpleValue )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:usedProcedure )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:phenomenonTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:hasAttribute tern:attribute )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:hasAttribute tern:hasSimpleValue )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:usedProcedure tern:methodType )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:phenomenonTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:hasAttribute tern:attribute )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:hasAttribute tern:hasSimpleValue )
                                     ( [ sh:inversePath rdfs:member ] rdf:type )
                                     ( [ sh:inversePath rdfs:member ] schema:isPartOf )
                                     ( [sh:inversePath schema:about] rdfs:comment )
                                     ( [sh:inversePath schema:about] schema:identifier )
                                     ( [sh:inversePath schema:about] schema:isPartOf )
                                 )
                    ]
            ] ;
    .


    prez:BDRMachineFeatureProfile a
            prof:Profile,
            sh:NodeShape,
            prez:ListingProfile ;
        dcterms:description "BDR Machine Readable profile to return appropriate paths for a Feature." ;
        dcterms:identifier "bdr-feature-machine"^^xsd:token ;
        dcterms:title "BDR Feature Machine Readable Profile" ;
        altr-ext:constrainsClass
            geo:Feature, rdfs:Resource , prez:CQLFilterResult , prez:SearchResult ;
        altr-ext:hasDefaultResourceFormat "application/geo+json" ;
        altr-ext:hasResourceFormat
            "application/geo+json",
            "application/anot+ld+json",
            "application/ld+json",
            "application/rdf+xml",
            "text/anot+turtle",
            "text/turtle" ;
        sh:property
            [
                sh:path
                    [
                        sh:union (
                                     shext:allPredicateValues
                                     [ shext:bNodeDepth "2" ]
                                     ( geo:hasGeometry geo:asWKT )
                                     ( geo:hasDefaultGeometry geo:asWKT )
                                     ( schema:temporal shext:allPredicateValues )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:hasSimpleResult )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:usedProcedure )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:phenomenonTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasSimpleResult )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:usedProcedure tern:methodType )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:phenomenonTime )
                                     ( [ sh:inversePath rdfs:member ] rdf:type )
                                     ( [ sh:inversePath rdfs:member ] schema:isPartOf )
                                     ( [sh:inversePath schema:about] rdfs:comment )
                                     ( [sh:inversePath schema:about] schema:identifier )
                                     ( [sh:inversePath schema:about] schema:isPartOf )
                                 )
                    ]
            ] ;
    .

    prez:BDRMachineFeatureWithAttributesProfile a
            prof:Profile,
            sh:NodeShape,
            prez:ListingProfile ;
        dcterms:description "BDR Machine Readable profile to return appropriate paths plus TERN Attributes for a Feature." ;
        dcterms:identifier "bdr-feature-attributes-machine"^^xsd:token ;
        dcterms:title "BDR Feature and Attributes Machine Readable Profile" ;
        altr-ext:constrainsClass
            geo:Feature, rdfs:Resource , prez:CQLFilterResult , prez:SearchResult ;
        altr-ext:hasDefaultResourceFormat "application/geo+json" ;
        altr-ext:hasResourceFormat
            "application/geo+json",
            "application/anot+ld+json",
            "application/ld+json",
            "application/rdf+xml",
            "text/anot+turtle",
            "text/turtle" ;
        sh:property
            [
                sh:path
                    [
                        sh:union (
                                     shext:allPredicateValues
                                     [ shext:bNodeDepth "2" ]
                                     ( geo:hasGeometry geo:asWKT )
                                     ( geo:hasDefaultGeometry geo:asWKT )
                                     ( schema:temporal shext:allPredicateValues )
                                     ( tern:hasAttribute tern:attribute )
                                     ( tern:hasAttribute tern:hasSimpleValue )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:hasSimpleResult )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:usedProcedure )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember sosa:phenomenonTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:hasAttribute tern:attribute )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasMember tern:hasAttribute tern:hasSimpleValue )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] rdf:type )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:hasSimpleResult )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:observedProperty )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:usedProcedure tern:methodType )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:resultDateTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] sosa:phenomenonTime )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:hasAttribute tern:attribute )
                                     ( [ sh:inversePath sosa:hasFeatureOfInterest ] tern:hasAttribute tern:hasSimpleValue )
                                     ( [ sh:inversePath rdfs:member ] rdf:type )
                                     ( [ sh:inversePath rdfs:member ] schema:isPartOf )
                                     ( [sh:inversePath schema:about] rdfs:comment )
                                     ( [sh:inversePath schema:about] schema:identifier )
                                     ( [sh:inversePath schema:about] schema:isPartOf )
                                 )
                    ]
            ] ;
    .

    prez:MinimalFeatureListingProfile a
            prof:Profile,
            sh:NodeShape,
            prez:ListingProfile,
            prez:ObjectProfile ;
        dcterms:description "Fast and minimal profile for listing Features." ;
        dcterms:identifier "feature-listing-minimal"^^xsd:token ;
        dcterms:title "Feature Listing Minimal Profile" ;
        altr-ext:constrainsClass
            geo:Feature, rdfs:Resource , prez:CQLFilterResult , prez:SearchResult ;
        altr-ext:hasDefaultResourceFormat "application/geo+json" ;
        altr-ext:hasResourceFormat
            "application/geo+json",
            "application/anot+ld+json",
            "application/ld+json",
            "application/rdf+xml",
            "text/anot+turtle",
            "text/turtle" ;
        sh:property
            [
                sh:path
                    [
                        sh:union (
                                    rdf:type
                                    schema:identifier
                                    schema:isPartOf
                                    void:inDataset
                                    ( geo:hasGeometry geo:asWKT )
                                    ( geo:hasDefaultGeometry geo:asWKT )
                                    ( [ sh:inversePath rdfs:member ] rdf:type )
                                    ( [ sh:inversePath rdfs:member ] schema:isPartOf )
                                    ( [sh:inversePath schema:about] schema:identifier )
                                    ( [sh:inversePath schema:about] schema:isPartOf )
                                 )
                    ]
            ] ;
    .
}
